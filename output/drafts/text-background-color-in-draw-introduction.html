<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Text Background Color in Draw. Introduction.</title>
        <link rel="stylesheet" href="https://matteocam.github.io/output/theme/css/main.css" />
        <link href="https://matteocam.github.io/output/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="GSoC 2014 - Hacking Draw Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://matteocam.github.io/output/">GSoC 2014 - Hacking Draw </a></h1>
                <nav><ul>
                    <li class="active"><a href="https://matteocam.github.io/output/category/gsoc-draw-text-background-color.html">gsoc-draw-text-background-color</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://matteocam.github.io/output/text-background-color-in-draw-introduction.html" rel="bookmark"
           title="Permalink to Text Background Color in Draw. Introduction.">Text Background Color in Draw. Introduction.</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-06-22T00:00:00">
                Sun 22 June 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="https://matteocam.github.io/output/author/matteo-campanelli.html">Matteo Campanelli</a>
        </address>
<p>In <a href="https://matteocam.github.io/output/category/gsoc-draw-text-background-color.html">gsoc-draw-text-background-color</a>. </p>

</footer><!-- /.post-info -->      <p>[TODO: use emph font for modules, methods, objects]
[TODO: link names to LO documentation or OpenGrok]</p>
<p>[TODO: it should present a more global discussion of what is needed to
do: load/save, UNO API, document model...]</p>
<p>In this series of blog posts I will describe how to add font attribute
features to LO Draw, looking on text background color as a working
example.
In this post I will introduce the problem and outline the structure of
the changes in the source code.</p>
<h2>The problem</h2>
<p>Currently, LO Draw is not able to assign an arbitrary background
to arbitrary text portions. </p>
<p>[more introductory stuff]</p>
<p>What kind of capabilities does LO Draw need in order for that?
- an attribute in editengine as well as its connection to UNO API;
- the actual drawing procedures called from this attribute.</p>
<h2>~An overview of Draw Architecture ~</h2>
<p>Who deals with all the drawing process?
An important starting point for attributes of text in ImplEditEngine in
the editengine module. Some of the responsibilities of this class that
mostly concern us are: dividing the text in portions having different attributes, passing information
about these attributes to drawing modules (i.e. vcl and drawinglayer).</p>
<p>A note: for sake of clarity, the following descriptions of classes
responsibilities may be quite simplifying at times. However, please feel
free to contact me if you think there are some significant errors; I
will be happy to fix them.</p>
<p>An attribute is some kind of information about the characters in a text
(information at other levels, e.g. the paragraph, is also handled in the
same way, here we will focus on character attributes).</p>
<p>[XXX: Describe difference between edit and non-edit mode]</p>
<p>Rougly, painting of text happens in the following way:
[XXX: check this info]
[In Edit Mode]</p>
<hr />
<p>The method ImplEditEngine::Paint [XXX: which one?] takes care of drawing
each portion of text. For each of these portions, its attributes are
passed to an object of the class OutputDevice and then its text drawing methods are
called ( indirectly from Font method QuickDrawText ). 
[How about Fonts in all this? Think of describing them too]</p>
<h2>[In non-edit mode]</h2>
<p>Here information on attributes is passed to the drawinglayer module andp
drawing occurs by means of callback.
[XXX: put this in some other post?]
Information is encapsulated in... [complex structure. This structure had
no information on Fill Color]</p>
<ul>
<li>
<p>What is editengine?</p>
</li>
<li>
<p>What is an attribute?</p>
</li>
</ul>
<p>[Describe loosely the modules, some important classes and the connection
between them. Put these descriptions under the categories of drawing and
attribute]</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://matteocam.github.io/output/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>